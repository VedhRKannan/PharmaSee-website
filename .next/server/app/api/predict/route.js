(()=>{var t={};t.id=121,t.ids=[121],t.modules={846:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1820:t=>{"use strict";t.exports=require("os")},2505:(t,e,r)=>{"use strict";r.r(e),r.d(e,{patchFetch:()=>f,routeModule:()=>u,serverHooks:()=>p,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>h,runtime:()=>c});var n=r(6559),i=r(8088),o=r(7719),a=r(3253);let c="nodejs";async function h(t){try{let{smiles:e}=await t.json();if(!e)return console.error("ERROR: No SMILES string provided."),new Response(JSON.stringify({error:"No SMILES provided"}),{status:400});console.log("DEBUG: Running Python script with input:",e);let r={mode:"text",pythonPath:"/usr/bin/python3",args:[e]};return new Promise(t=>{let e=new a.PythonShell("predict.py",r),s=[],n=!1;e.on("message",function(t){n||s.push(t)}),e.on("error",function(e){console.error("Python error:",e),t(new Response(JSON.stringify({error:"Internal server error"}),{status:500}))}),e.on("close",function(e){if(!n){console.log("DEBUG: Python script exited with code",e),console.log("DEBUG: Raw Python output:",s);try{let e=JSON.parse(s.join("\n"));t(new Response(JSON.stringify(e),{status:200}))}catch(e){console.error("JSON Parse Error:",e),t(new Response(JSON.stringify({error:"Invalid JSON response from Python script"}),{status:500}))}}}),setTimeout(()=>{console.error("ERROR: Python script timed out."),n=!0,e.terminate(),t(new Response(JSON.stringify({error:"Python script timeout"}),{status:500}))},1e4)})}catch(t){return console.error("API Error:",t),new Response(JSON.stringify({error:"Server error"}),{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/predict/route",pathname:"/api/predict",filename:"route",bundlePath:"app/api/predict/route"},resolvedPagePath:"/Users/ramalingamkannan/coding/PharmaSee-website/src/app/api/predict/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:p}=u;function f(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},3033:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3253:function(t,e,r){"use strict";var s=this&&this.__awaiter||function(t,e,r,s){return new(r||(r=Promise))(function(n,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}c((s=s.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.PythonShell=e.NewlineTransformer=e.PythonShellErrorWithLogs=e.PythonShellError=void 0;let n=r(4735),i=r(9646),o=r(1820),a=r(3873),c=r(7910),h=r(9021),u=r(8354);function l(t){return null==t?[]:Array.isArray(t)?t:[t]}function d(t,...e){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(let r in e)t[r]=e[r]}),t}function p(){return Math.floor(1e10*Math.random())}let f=(0,u.promisify)(i.exec);class y extends Error{}e.PythonShellError=y;class m extends y{}e.PythonShellErrorWithLogs=m;class P extends c.Transform{_transform(t,e,r){let s=t.toString();this._lastLineData&&(s=this._lastLineData+s);let n=s.split(o.EOL);this._lastLineData=n.pop(),n.forEach(this.push.bind(this)),r()}_flush(t){this._lastLineData&&this.push(this._lastLineData),this._lastLineData=null,t()}}e.NewlineTransformer=P;class g extends n.EventEmitter{constructor(t,e,r=null,s=null){let o;function c(t,e){return"string"==typeof e?g[t][e]:"function"==typeof e?e:void 0}if(super(),0==t.trim().length)throw Error("scriptPath cannot be empty! You must give a script for python to run");let h=this,u="";n.EventEmitter.call(this),o=(e=d({},g.defaultOptions,e)).pythonPath?e.pythonPath:g.defaultPythonPath;let p=l(e.pythonOptions),f=l(e.args);function m(){let t;h.stderrHasEnded&&h.stdoutHasEnded&&(null!=h.exitCode||null!=h.exitSignal)&&(h.exitCode&&0!==h.exitCode&&(t=d(t=u?h.parseError(u):new y("process exited with code "+h.exitCode),{executable:o,options:p.length?p:null,script:h.scriptPath,args:f.length?f:null,exitCode:h.exitCode}),(h.listeners("pythonError").length||!h._endCallback)&&h.emit("pythonError",t)),h.terminated=!0,h.emit("close"),h._endCallback&&h._endCallback(t,h.exitCode,h.exitSignal))}this.scriptPath=(0,a.join)(e.scriptPath||"",t),this.command=p.concat(this.scriptPath,f),this.mode=e.mode||"text",this.formatter=c("format",e.formatter||this.mode),this.parser=c("parse",e.parser||this.mode),this.stderrParser=c("parse",e.stderrParser||"text"),this.terminated=!1,this.childProcess=(0,i.spawn)(o,this.command,e),["stdout","stdin","stderr"].forEach(function(t){h[t]=h.childProcess[t],h.parser&&h[t]&&h[t].setEncoding(e.encoding||"utf8")}),this.parser&&this.stdout&&(r||(r=new P),r.setEncoding(e.encoding||"utf8"),this.stdout.pipe(r).on("data",t=>{this.emit("message",h.parser(t))})),this.stderrParser&&this.stderr&&(s||(s=new P),s.setEncoding(e.encoding||"utf8"),this.stderr.pipe(s).on("data",t=>{this.emit("stderr",h.stderrParser(t))})),this.stderr?(this.stderr.on("data",function(t){u+=""+t}),this.stderr.on("end",function(){h.stderrHasEnded=!0,m()})):h.stderrHasEnded=!0,this.stdout?this.stdout.on("end",function(){h.stdoutHasEnded=!0,m()}):h.stdoutHasEnded=!0,this.childProcess.on("error",function(t){h.emit("error",t)}),this.childProcess.on("exit",function(t,e){h.exitCode=t,h.exitSignal=e,m()})}static checkSyntax(t){return s(this,void 0,void 0,function*(){let e=p(),r=(0,o.tmpdir)()+a.sep+`pythonShellSyntaxCheck${e}.py`;return(0,u.promisify)(h.writeFile)(r,t).then(()=>this.checkSyntaxFile(r))})}static getPythonPath(){return this.defaultOptions.pythonPath?this.defaultOptions.pythonPath:this.defaultPythonPath}static checkSyntaxFile(t){return s(this,void 0,void 0,function*(){let e=this.getPythonPath();return f(`${e} -m py_compile ${t}`)})}static run(t,e){return new Promise((r,s)=>{let n=new g(t,e),i=[];n.on("message",function(t){i.push(t)}).end(function(t){t?(t.logs=i,s(t)):r(i)})})}static runString(t,e){let r=p(),s=o.tmpdir+a.sep+`pythonShellFile${r}.py`;return(0,h.writeFileSync)(s,t),g.run(s,e)}static getVersion(t){return t||(t=this.getPythonPath()),f(t+" --version")}static getVersionSync(t){return t||(t=this.getPythonPath()),(0,i.execSync)(t+" --version").toString()}parseError(t){let e,r=""+t;if(/^Traceback/.test(r)){let s=r.trim().split(o.EOL);(e=new y(s.pop())).traceback=t,e.stack+=o.EOL+"    ----- Python Traceback -----"+o.EOL+"  ",e.stack+=s.slice(1).join(o.EOL+"  ")}else e=new y(r);return e}send(t){if(!this.stdin)throw Error("stdin not open for writing");let e=this.formatter?this.formatter(t):t;return"binary"!==this.mode&&(e+=o.EOL),this.stdin.write(e),this}end(t){return this.childProcess.stdin&&this.childProcess.stdin.end(),this._endCallback=t,this}kill(t){return this.terminated=this.childProcess.kill(t),this}terminate(t){return this.kill(t)}}e.PythonShell=g,g.defaultPythonPath="win32"!=process.platform?"python3":"python",g.defaultOptions={},g.format={text:function(t){return t?"string"!=typeof t?t.toString():t:""},json:function(t){return JSON.stringify(t)}},g.parse={text:function(t){return t},json:function(t){return JSON.parse(t)}}},3873:t=>{"use strict";t.exports=require("path")},4735:t=>{"use strict";t.exports=require("events")},4870:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},6559:(t,e,r)=>{"use strict";t.exports=r(4870)},7910:t=>{"use strict";t.exports=require("stream")},8335:()=>{},8354:t=>{"use strict";t.exports=require("util")},9021:t=>{"use strict";t.exports=require("fs")},9294:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9646:t=>{"use strict";t.exports=require("child_process")}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[719],()=>r(2505));module.exports=s})();